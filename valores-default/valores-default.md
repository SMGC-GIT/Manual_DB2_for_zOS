```markdown
# DEFAULT em Colunas no DB2 for z/OS

> Se√ß√£o do Manual DBA de Desenvolvimento ‚Äì DB2 for z/OS  
> √öltima atualiza√ß√£o: julho/2025  
> Autora: Silvia Guimar√£es

---

## üìë √çndice

- [üìò 1. O que √© o DEFAULT no DB2](#-1-o-que-√©-o-default-no-db2)
- [‚öôÔ∏è 2. Funcionamento Geral](#Ô∏è-2-funcionamento-geral)
- [üß¨ 3. Tipos de DEFAULT por Data Type](#-3-tipos-de-default-por-data-type)
- [‚úÖ 4. Vantagens](#-4-vantagens)
- [‚ö†Ô∏è 5. Cuidados e Desvantagens](#Ô∏è-5-cuidados-e-desvantagens)
- [üìà 6. Performance e Impactos](#-6-performance-e-impactos)
- [üîÑ 7. Inclus√£o, Altera√ß√£o e Drop](#-7-inclus√£o-altera√ß√£o-e-drop)
- [üìö 8. Refer√™ncias Oficiais IBM](#-8-refer√™ncias-oficiais-ibm)

---

## üìò 1. O que √© o DEFAULT no DB2

O `DEFAULT` define um **valor padr√£o** atribu√≠do automaticamente a uma coluna quando um valor n√£o √© fornecido durante a execu√ß√£o de um `INSERT`. Ele garante preenchimento autom√°tico de campos e padroniza√ß√£o de valores quando ausentes.

---

## ‚öôÔ∏è 2. Funcionamento Geral

- O DEFAULT pode ser especificado no momento do `CREATE TABLE` ou com `ALTER TABLE`.
- Pode conter:
  - Um valor **constante literal** (`0`, `'A'`, `'2025-01-01'`)
  - Uma fun√ß√£o especial (`CURRENT DATE`, `CURRENT TIME`, `CURRENT TIMESTAMP`)
  - Ou a palavra `NULL`, se a coluna for nullable
- S√≥ √© aplicado em `INSERT` quando o valor da coluna for omitido
- N√£o se aplica a `UPDATE`, a menos que explicitamente controlado

```sql
CREATE TABLE FUNCIONARIOS (
  ID         INTEGER       NOT NULL,
  NOME       VARCHAR(100)  NOT NULL,
  ATIVO      CHAR(1)       DEFAULT 'S',
  ADMISSAO   DATE          DEFAULT CURRENT DATE
);
```

---

## üß¨ 3. Tipos de DEFAULT por Data Type

| Tipo de Dado                         | Valor Default Impl√≠cito | Pode Definir Customizado? | Observa√ß√µes |
|--------------------------------------|--------------------------|----------------------------|-------------|
| `SMALLINT`, `INTEGER`, `BIGINT`      | `0`                      | ‚úÖ Sim                     | Num√©ricos inteiros |
| `DECIMAL`, `FLOAT`, `REAL`, `DOUBLE` | `0.0`                    | ‚úÖ Sim                     | Num√©ricos com ponto flutuante |
| `CHAR`, `VARCHAR`                    | String vazia (`''`)      | ‚úÖ Sim                     | Pode ser qualquer literal |
| `DATE`                               | `NULL`                   | ‚úÖ Sim                     | Pode usar `CURRENT DATE` |
| `TIME`                               | `NULL`                   | ‚úÖ Sim                     | Pode usar `CURRENT TIME` |
| `TIMESTAMP`                          | `NULL`                   | ‚úÖ Sim                     | Pode usar `CURRENT TIMESTAMP` |
| `BLOB`, `CLOB`, `DBCLOB`             | `NULL`                   | ‚úÖ Sim                     | Exige tamanho compat√≠vel |
| `ROWID`                              | Autom√°tico               | ‚ùå N√£o                     | N√£o aceita valor default definido |

---

## ‚úÖ 4. Vantagens

- Simplifica `INSERT` de dados em colunas opcionais
- Evita erros por omiss√£o de colunas
- Garante valores consistentes
- Facilita manuten√ß√£o de c√≥digo e evolu√ß√£o de tabelas
- Ideal para colunas como `STATUS`, `DATA_CRIACAO`, `USUARIO_CRIADOR`, etc.
- Melhora a clareza e padroniza√ß√£o de regras de neg√≥cio

---

## ‚ö†Ô∏è 5. Cuidados e Desvantagens

- ‚ùó N√£o se aplica a registros j√° existentes; s√≥ afeta novos `INSERT`
- ‚ö†Ô∏è Uso indiscriminado pode ocultar falhas de l√≥gica na aplica√ß√£o
- ‚ùó Pode gerar falsa sensa√ß√£o de que o campo foi preenchido intencionalmente
- ‚ö†Ô∏è Altera√ß√µes de DEFAULT em tabelas com muitos dados devem ser planejadas (verifique locks e impactos)
- üö´ N√£o aceita express√µes complexas nem fun√ß√µes definidas pelo usu√°rio (`UDF`)
- ‚ùó Em `MERGE`, o DEFAULT pode ou n√£o ser aplicado dependendo da l√≥gica do `WHEN NOT MATCHED`

---

## üìà 6. Performance e Impactos

- ‚úÖ O uso de DEFAULT **n√£o afeta negativamente a performance de leitura**
- ‚úÖ Melhora a performance de `INSERT` em compara√ß√£o a c√≥digo de aplica√ß√£o que tenta preencher valores manualmente
- ‚ùó ALTER TABLE com novo DEFAULT pode requerer `conversion phase` em tablespace particionado
- ‚úÖ N√£o interfere diretamente nos √≠ndices
- ‚úÖ Pode ser usado com `GENERATED ALWAYS` ou `GENERATED BY DEFAULT` em colunas geradas

---

## üîÑ 7. Inclus√£o, Altera√ß√£o e Drop

### ‚ûï Adicionar coluna com DEFAULT

```sql
ALTER TABLE CLIENTES ADD COLUMN SITUACAO CHAR(1) DEFAULT 'A';
```

### üìù Alterar valor default existente

```sql
ALTER TABLE CLIENTES ALTER COLUMN SITUACAO SET DEFAULT 'I';
```

### ‚ùå Remover valor default

```sql
ALTER TABLE CLIENTES ALTER COLUMN SITUACAO DROP DEFAULT;
```

üìå Essas a√ß√µes **n√£o atualizam os dados j√° existentes** na tabela. S√≥ afetam novos `INSERT`.

---

## üìö 8. Refer√™ncias Oficiais IBM

- üîó [CREATE TABLE - IBM DB2 13 for z/OS](https://www.ibm.com/docs/en/db2-for-zos/13?topic=statements-create-table)
- üîó [ALTER TABLE - IBM DB2 13 for z/OS](https://www.ibm.com/docs/en/db2-for-zos/13?topic=statements-alter-table)
- üîó [DEFAULT Clause - DB2 SQL Reference](https://www.ibm.com/docs/en/db2-for-zos/13?topic=specifications-default-clause)
- üîó [DB2 13 SQL Reference Guide](https://www.ibm.com/docs/en/db2-for-zos/13?topic=reference-sql-statements)

---

## ‚úÖ Considera√ß√µes Finais

Utilize `DEFAULT` para definir comportamentos padronizados de neg√≥cio, facilitando inser√ß√µes e garantindo consist√™ncia. Por√©m, planeje bem seu uso para evitar que campos cr√≠ticos fiquem com valores n√£o intencionais. Altera√ß√µes em produ√ß√£o devem ser testadas previamente, principalmente em grandes tabelas ou ambientes com alta concorr√™ncia.

---
```
